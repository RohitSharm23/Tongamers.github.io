<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tic Tac Toe - Mobile & Web</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            height: 100vh;
            background: linear-gradient(135deg, #b3d9ff, #a3cfff);
            display: flex;
            justify-content: center;
            align-items: center;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Arial, sans-serif;
            user-select: none;
            -webkit-user-select: none;
            touch-action: manipulation;
        }

        .game {
            width: 340px;
            max-width: 90vw;
            padding: 25px;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            text-align: center;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            backdrop-filter: blur(10px);
        }

        h2 {
            margin-bottom: 20px;
            font-size: 24px;
            color: #333;
            font-weight: 600;
        }

        .grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
            margin-bottom: 20px;
        }

        button.cell {
            height: 90px;
            font-size: 48px;
            font-weight: bold;
            background: #fff;
            border: 3px solid #e0e0e0;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.2s ease;
            color: #333;
        }

        button.cell:hover:not(:disabled) {
            background: #f8f9ff;
            border-color: #4a90e2;
            transform: scale(1.02);
        }

        button.cell:active:not(:disabled) {
            transform: scale(0.98);
        }

        button.cell:disabled {
            cursor: not-allowed;
            opacity: 0.6;
        }

        .reset {
            padding: 12px 30px;
            font-size: 16px;
            font-weight: 600;
            background: linear-gradient(135deg, #4a90e2, #357abd);
            color: white;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.2s ease;
            box-shadow: 0 4px 15px rgba(74, 144, 226, 0.4);
        }

        .reset:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(74, 144, 226, 0.5);
        }

        /* Popup */
        .popup {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.6);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            backdrop-filter: blur(5px);
        }

        .popup-content {
            background: white;
            padding: 30px;
            text-align: center;
            width: 280px;
            max-width: 90vw;
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.3);
            animation: popupSlide 0.3s ease;
        }

        @keyframes popupSlide {
            from { transform: scale(0.8) translateY(20px); opacity: 0; }
            to { transform: scale(1) translateY(0); opacity: 1; }
        }

        .popup-content h3 {
            margin-bottom: 20px;
            font-size: 22px;
            color: #333;
        }

        .popup-content button {
            padding: 12px 30px;
            font-size: 16px;
            background: linear-gradient(135deg, #4a90e2, #357abd);
            color: white;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        /* Mobile Optimizations */
        @media (max-width: 480px) {
            .game { 
                width: 95vw; 
                padding: 20px 15px; 
                margin: 10px;
            }
            
            button.cell { 
                height: 22vw; 
                font-size: 18vw;
                min-height: 70px;
            }
            
            h2 { font-size: 20px; }
        }

        @media (hover: none) and (pointer: coarse) {
            button.cell:hover { transform: none; }
        }
    </style>
</head>
<body>

<div class="game">
    <h2 id="status">Turn: X</h2>
    <div class="grid" id="grid"></div>
    <button class="reset" onclick="resetGame()">ðŸ”„ New Game</button>
</div>

<!-- Popup -->
<div class="popup" id="popup">
    <div class="popup-content">
        <h3 id="popupText"></h3>
        <button onclick="closePopup()">OK</button>
    </div>
</div>

<script>
    let currentPlayer = "X";
    let board = Array(9).fill("");
    let gameActive = true;

    const status = document.getElementById("status");
    const grid = document.getElementById("grid");
    const popup = document.getElementById("popup");
    const popupText = document.getElementById("popupText");

    // Create 9 buttons with accessibility
    for (let i = 0; i < 9; i++) {
        const btn = document.createElement("button");
        btn.className = "cell";
        btn.setAttribute('aria-label', `Cell ${i + 1}`);
        btn.onclick = () => makeMove(btn, i);
        grid.appendChild(btn);
    }

    function makeMove(button, index) {
        if (board[index] !== "" || !gameActive) return;

        board[index] = currentPlayer;
        button.textContent = currentPlayer;
        button.disabled = true;

        const winner = checkWinner();
        if (winner) {
            showPopup(`ðŸŽ‰ Player ${winner} Wins!`);
            gameActive = false;
            return;
        }

        if (board.every(cell => cell !== "")) {
            showPopup("ðŸ¤ It's a Draw!");
            return;
        }

        currentPlayer = currentPlayer === "X" ? "O" : "X";
        status.textContent = `Turn: ${currentPlayer}`;
        
        // Visual feedback
        status.style.color = currentPlayer === "X" ? "#e74c3c" : "#3498db";
    }

    function checkWinner() {
        const lines = [
            [0,1,2],[3,4,5],[6,7,8],  // Rows
            [0,3,6],[1,4,7],[2,5,8],  // Columns
            [0,4,8],[2,4,6]           // Diagonals
        ];

        for (let [a,b,c] of lines) {
            if (board[a] && board[a] === board[b] && board[a] === board[c]) {
                return board[a];
            }
        }
        return null;
    }

    function disableAll() {
        document.querySelectorAll(".cell").forEach(btn => btn.disabled = true);
    }

    function resetGame() {
        board = Array(9).fill("");
        currentPlayer = "X";
        gameActive = true;
        status.textContent = "Turn: X";
        status.style.color = "#333";
        
        document.querySelectorAll(".cell").forEach(btn => {
            btn.textContent = "";
            btn.disabled = false;
        });
        
        closePopup();
    }

    function showPopup(msg) {
        popupText.textContent = msg;
        popup.style.display = "flex";
        disableAll();
    }

    function closePopup() {
        popup.style.display = "none";
    }

    // Prevent zoom on double-tap (mobile)
    document.addEventListener('touchstart', function(event) {
        if (event.touches.length > 1) {
            event.preventDefault();
        }
    });

    let lastTouchEnd = 0;
    document.addEventListener('touchend', function(event) {
        const now = (new Date()).getTime();
        if (now - lastTouchEnd <= 300) {
            event.preventDefault();
        }
        lastTouchEnd = now;
    }, false);
</script>

</body>
</html>
